{"remainingRequest":"/app/my-application/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/my-application/src/components/pages/teachers/CourseTaking.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/my-application/src/components/pages/teachers/CourseTaking.vue","mtime":1653638612201},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1653637948398},{"path":"/app/my-application/node_modules/babel-loader/lib/index.js","mtime":1653637958391},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1653637948398},{"path":"/app/my-application/node_modules/vue-loader/lib/index.js","mtime":1653637954854}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIHByb3BzOiB7CiAgICBjb3Vyc2VfaWQ6IE51bWJlcgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmdldF9ob21lX3Byb2ZpbGUoKQogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIAogICAgaGVhZGVyczogWwogICAgICB7dGV4dDogIuODpuODvOOCtuWQjSIsIHZhbHVlOiJ1c2VybmFtZSJ9LAogICAgICB7dGV4dDogIkVtYWlsIiwgdmFsdWU6ImVtYWlsIn0sCiAgICAgIHt0ZXh0OiAi44Ki44Kv44OG44Kj44OWIiwgdmFsdWU6ImlzX2FjdGl2ZSJ9LAogICAgICB7dGV4dDogIueoruWIpSIsIHZhbHVlOiJraW5kX25hbWUifQogICAgXSwKICAgIHVzZXJfaW5mbyA6IHt9LAogICAgaXNfY3JlYXRlIDogZmFsc2UsCiAgICBjb3Vyc2U6IHt9LAogICAgdGFraW5nX3N0dWRlbnRzOiBbXSwKICAgIGFkZF9lbWFpbDogIiIsCiAgICBhZGRfdXNlcl9lcnJvcjogIiIKICB9KSwKICBtZXRob2RzOnsKICAgIGxvZ291dDogZnVuY3Rpb24oKXsKICAgICAgbGV0IHNlbGYgPSB0aGlzCiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2hvbWVfcHJvZmlsZSIsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KQogICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5pc19hY3RpdmUpewogICAgICAgICAgc2VsZi5nb19sb2dpbl9wYWdlKCkKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKAogICAgICAgIGZ1bmN0aW9uKGVycm9yKXsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwMSl7CiAgICAgICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHtuYW1lOidMb2dpbid9KQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKQogICAgfSwKICAgIGdvX2xvZ2luX3BhZ2U6IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidMb2dpbid9KQogICAgfSwKICAgIG1vdmVfdG9fY291cnNlX2luZm8oKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6J0NvdXJzZUluZm8nLCBwYXJhbXM6eyJjb3Vyc2VfaWQiOnRoaXMuY291cnNlX2lkfX0pCiAgICB9LAogICAgbW92ZV90b19jb3Vyc2VfdGFraW5nKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidDb3Vyc2VUYWtpbmcnLHBhcmFtczp7ImNvdXJzZV9pZCI6dGhpcy5jb3Vyc2VfaWR9fSkKICAgIH0sCiAgICBtb3ZlX3RvX2NvdXJzZV9lZGl0KCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidDb3Vyc2VFZGl0JyxwYXJhbXM6eyJjb3Vyc2VfaWQiOnRoaXMuY291cnNlX2lkfX0pCiAgICB9LAogICAgZ2V0X2hvbWVfcHJvZmlsZSgpewogICAgICBsZXQgc2VsZiA9IHRoaXMKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwMDAvaG9tZV9wcm9maWxlIiwge3dpdGhDcmVkZW50aWFsczogdHJ1ZX0pCiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgIHNlbGYudXNlcl9pbmZvID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHNlbGYuaXNfY3JlYXRlciA9IHJlc3BvbnNlLmRhdGEuY3JlYXRlCiAgICAgICAgaWYoc2VsZi5pc19jcmVhdGVyKXsKICAgICAgICAgIHNlbGYuZ2V0X2NvdXJzZV9pbmZvKCkKICAgICAgICAgIHNlbGYuZ2V0X3Rha2luZ19zdHVkZW50cygpCiAgICAgICAgfQogICAgICB9KS5jYXRjaCgKICAgICAgICBmdW5jdGlvbihlcnJvcikgIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwMSl7CiAgICAgICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHtuYW1lOidTaWdudXAnfSkKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICkKICAgIH0sCiAgICBnZXRfY291cnNlX2luZm8oKXsKICAgICAgbGV0IHNlbGYgPSB0aGlzCiAgICAgIGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2dldF9jb3Vyc2VfaW5mby8ke3NlbGYuY291cnNlX2lkfWAsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICBzZWxmLmNvdXJzZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcil7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgIHsKICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDEpewogICAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7bmFtZTonU2lnbnVwJ30pCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApIAogICAgfSwKICAgIGdldF90YWtpbmdfc3R1ZGVudHMoKXsKICAgICAgbGV0IHNlbGYgPSB0aGlzCiAgICAgIGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2dldF90YWtpbmdfc3R1ZGVudHMvJHtzZWxmLmNvdXJzZV9pZH1gLCB7d2l0aENyZWRlbnRpYWxzOiB0cnVlfSkKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgc2VsZi50YWtpbmdfc3R1ZGVudHMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpICB7CiAgICAgICAgICBpZihlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKXsKICAgICAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goe25hbWU6J1NpZ251cCd9KQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKSAKICAgIH0sCiAgICBhZGRfdGFraW5nX3N0dWRlbnRzKCl7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsiY291cnNlX2lkIjp0aGlzLmNvdXJzZV9pZCwgImVtYWlsIjogdGhpcy5hZGRfZW1haWx9CiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpOwogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgIH07CiAgICAgIGxldCBzZWxmID0gdGhpcwogICAgICBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjgwMDAvcmVnaXN0ZXJfdGFraW5nX3N0dWRlbnQnLCBwYXJhbXMsIGNvbmZpZykKICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgc2VsZi5nZXRfdGFraW5nX3N0dWRlbnRzKCkKICAgICAgfSkKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["CourseTaking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseTaking.vue","sourceRoot":"src/components/pages/teachers","sourcesContent":["<template>\n  <v-container>\n    <v-responsive :max-width=\"1200\" class=\"mx-auto\">\n      <v-container>\n        <v-row>\n          <v-col cols=\"6\">\n            <v-subheader :class=\"['text-h5']\">{{course.course_name}}</v-subheader>\n          </v-col>\n          <v-col cols=\"6\">\n            <v-container>  \n              <v-row justify=\"end\">\n                <div>\n                  {{this.user_info.username}} ( {{this.user_info.email}})<br>\n                  {{this.user_info.kind_name}} としてログイン中\n                </div>\n              </v-row>\n              <v-row justify=\"end\">\n                <v-btn text color=\"grey\" @click=\"logout()\" value=\"POST\">logout</v-btn>\n              </v-row>\n            </v-container>\n          </v-col>\n        </v-row>\n        <v-row>\n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_info()\" depressed block color=\"transparent\"  class=\"mb-2\"> \n            コース情報\n          </v-btn>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_taking()\" depressed block color=\"transparent\"  class=\"mb-2\">\n            履修者\n          </v-btn>\n          <v-divider class=\"red\"></v-divider>\n        </v-col >  \n        <v-col cols=\"2\">\n          <v-btn depressed block color=\"transparent\"  class=\"mb-2\">\n            プレビュー\n          </v-btn>\n        </v-col >  \n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_edit()\" depressed block color=\"transparent\"  class=\"mb-2\">\n            編集\n          </v-btn>\n        </v-col>  \n        </v-row>\n        <v-divider class=\"mt-0\"></v-divider>\n        <v-row class=\"mt-5\" >\n          <v-responsive :max-width=\"1000\" class=\"mx-auto\">\n            <v-container>\n              <v-row>\n                <v-col>\n                  <v-subheader :class=\"['text-h5']\">履修中のユーザ</v-subheader>\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col>\n                  <v-data-table\n                    :headers=\"headers\"\n                    :items=\"taking_students\"\n                    :items-per-page=\"5\"\n                    :search=\"search\"\n                    \n                  ></v-data-table>\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col>\n                  <v-subheader :class=\"['text-h5']\">履修者の追加</v-subheader>\n                </v-col>\n              </v-row>\n              <v-row >\n                <v-col cols=\"5\">\n                  <v-text-field v-model=\"add_email\" label=\"Emailアドレスを入力\" outlined dense></v-text-field>\n                </v-col>\n                <v-col cols=\"1\">\n                  <v-btn @click=\"add_taking_students()\" color=\"primary\">追加</v-btn>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-responsive>\n        </v-row>\n        \n      </v-container>\n    </v-responsive>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Home\",\n  props: {\n    course_id: Number\n  },\n  created: function() {\n    this.get_home_profile()\n  },\n  data: () => ({\n    \n    headers: [\n      {text: \"ユーザ名\", value:\"username\"},\n      {text: \"Email\", value:\"email\"},\n      {text: \"アクティブ\", value:\"is_active\"},\n      {text: \"種別\", value:\"kind_name\"}\n    ],\n    user_info : {},\n    is_create : false,\n    course: {},\n    taking_students: [],\n    add_email: \"\",\n    add_user_error: \"\"\n  }),\n  methods:{\n    logout: function(){\n      let self = this\n      axios.get(\"http://localhost:8000/home_profile\", {withCredentials: true})\n      .then(function(response){\n        if(response.data.is_active){\n          self.go_login_page()\n        }\n      }).catch(\n        function(error){\n          console.log(error)\n          if(error.response.status == 401){\n            self.$router.push({name:'Login'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      )\n    },\n    go_login_page: function(){\n      this.$router.push({name:'Login'})\n    },\n    move_to_course_info(){\n      this.$router.push({name:'CourseInfo', params:{\"course_id\":this.course_id}})\n    },\n    move_to_course_taking(){\n      this.$router.push({name:'CourseTaking',params:{\"course_id\":this.course_id}})\n    },\n    move_to_course_edit(){\n      this.$router.push({name:'CourseEdit',params:{\"course_id\":this.course_id}})\n    },\n    get_home_profile(){\n      let self = this\n      axios.get(\"http://localhost:8000/home_profile\", {withCredentials: true})\n      .then(function(response){\n        console.log(response.data)\n        self.user_info = response.data\n        self.is_creater = response.data.create\n        if(self.is_creater){\n          self.get_course_info()\n          self.get_taking_students()\n        }\n      }).catch(\n        function(error)  {\n          console.log(error)\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      )\n    },\n    get_course_info(){\n      let self = this\n      axios.get(`http://localhost:8000/get_course_info/${self.course_id}`, {withCredentials: true})\n        .then(function(response){\n          console.log(response.data)\n          self.course = response.data\n        }).catch(function(error){\n          console.log(error.response)\n        }).catch(function(error)  {\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      ) \n    },\n    get_taking_students(){\n      let self = this\n      axios.get(`http://localhost:8000/get_taking_students/${self.course_id}`, {withCredentials: true})\n        .then(function(response){\n          console.log(response.data)\n          self.taking_students = response.data\n        }).catch(function(error){\n          console.log(error.response)\n        }).catch(function(error)  {\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      ) \n    },\n    add_taking_students(){\n      const params = {\"course_id\":this.course_id, \"email\": this.add_email}\n      console.log(JSON.stringify(params));\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true\n      };\n      let self = this\n      axios.post('http://localhost:8000/register_taking_student', params, config)\n      .then(function(response){\n        console.log(response.data)\n        self.get_taking_students()\n      })\n    }\n  },\n};\n</script>\n"]}]}