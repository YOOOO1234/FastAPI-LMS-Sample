{"remainingRequest":"/app/my-application/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/my-application/src/components/pages/students/Flow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/my-application/src/components/pages/students/Flow.vue","mtime":1652423115222},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1652423462045},{"path":"/app/my-application/node_modules/babel-loader/lib/index.js","mtime":1652423464641},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1652423462045},{"path":"/app/my-application/node_modules/vue-loader/lib/index.js","mtime":1652423456009}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IG1hcmtlZCB9IGZyb20gJ21hcmtlZCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkZsb3ciLAogIHByb3BzOiB7CiAgICBjb3Vyc2VfaWQ6IE51bWJlciwKICAgIGZsb3dfaWQ6IE51bWJlcgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICBsZXQgc2VsZiA9IHRoaXMKICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2hvbWVfcHJvZmlsZSIsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICBzZWxmLnVzZXJuYW1lID0gcmVzcG9uc2UuZGF0YS51c2VybmFtZQogICAgICAgICAgc2VsZi5pc19jcmVhdGVyID0gcmVzcG9uc2UuZGF0YS5jcmVhdGUKICAgICAgICAgIGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2dldF9mbG93LyR7c2VsZi5mbG93X2lkfWAsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgICBzZWxmLmZsb3cgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB9KS5jYXRjaCgKICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9nZXRfZmxvd193ZWxjb21lX3BhZ2UvJHtzZWxmLmZsb3dfaWR9YCwge3dpdGhDcmVkZW50aWFsczogdHJ1ZX0pCiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIHNlbGYud2VsY29tZV9wYWdlX2NvbnRlbnQgPSByZXNwb25zZS5kYXRhLmNvbnRlbnQKICAgICAgICAgIH0pLmNhdGNoKAogICAgICAgICAgICBmdW5jdGlvbihlcnJvcil7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2dldF9mbG93X3Nlc3Npb25zLyR7c2VsZi5mbG93X2lkfWAsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgICBzZWxmLmZsb3dfc2Vzc2lvbnMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB9KS5jYXRjaCgKICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgfSkuY2F0Y2goCiAgICAgICAgICBmdW5jdGlvbihlcnJvcikgIHsKICAgICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwMSl7CiAgICAgICAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goe25hbWU6J1NpZ251cCd9KQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBmbG93OiB7fSwKICAgIHdlbGNvbWVfcGFnZV9jb250ZW50OiAiIiwKICAgIHVzZXJuYW1lIDogIiIsCiAgICBpc19jcmVhdGVyIDogZmFsc2UsCiAgICBtYXJrZG93bjogICIjIEhlbGxvIFdvcmxkIiwKICAgIGZsb3dfc2Vzc2lvbnM6IFtdCiAgfSksCiAgbWV0aG9kczp7CiAgICAgIG1hcmtkb3duVG9IdG1sKG1kKXsKICAgICAgICByZXR1cm4gbWFya2VkKG1kKTsKICAgICAgfSwKICAgICAgc3RhcnRfbmV3X2Zsb3dfc2Vzc2lvbigpewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsiZmxvd19pZCI6dGhpcy5mbG93X2lkfQogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgfSwKICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgIH07CiAgICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICAgIGF4aW9zLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9zdGFydF9uZXdfZmxvd19zZXNzaW9uYCwgcGFyYW1zLCBjb25maWcpCiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuc3RhcnRfc3VjY2Vzcyl7CiAgICAgICAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goe25hbWU6J0Zsb3dTZXNzaW9uJywgcGFyYW1zOiB7Zmxvd19zZXNzaW9uX2lkOiByZXNwb25zZS5kYXRhLmZsb3dfc2Vzc2lvbl9pZCwgcGFnZV9udW06IDF9fSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goCiAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKXsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICB9LAogICAgICByZXN0YXJ0X2Zsb3dfc2Vzc2lvbihmbG93X3Nlc3Npb25faWQpewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidGbG93U2Vzc2lvbicsIHBhcmFtczoge2Zsb3dfc2Vzc2lvbl9pZDogZmxvd19zZXNzaW9uX2lkLCBwYWdlX251bTogMX19KQogICAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["Flow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Flow.vue","sourceRoot":"src/components/pages/students","sourcesContent":["<template>\n  <v-container>\n    <v-responsive :max-width=\"1200\" class=\"mx-auto\">\n      <v-container>\n        <v-subheader :class=\"['text-h5']\">{{flow.title}}</v-subheader>\n        <v-responsive >\n          <v-container class=\"pa-0\">\n            <div :class=\"`rounded-lg`\" class=\"grey lighten-3\" v-if=\"this.flow_sessions.length > 0\">\n              <v-container class=\"pa-1\">\n                <v-row no-gutters>\n                  <v-col cols=\"1\" class=\"text-center\">\n                    #\n                  </v-col>\n                  <v-col cols=\"4\" class=\"text-center\">\n                    start_datetime\n                  </v-col>\n                  <v-col cols=\"4\" class=\"text-center\">\n                    finish_datetime\n                  </v-col>\n                  <v-col cols=\"2\" class=\"text-center\">\n                    Finished\n                  </v-col>\n                  <v-col cols=\"1\" class=\"text-center\">\n                    Restart\n                  </v-col>\n                </v-row>\n                <v-row v-for=\"(flow_session,i) in this.flow_sessions\" :key=\"flow_session.id\" class=\"pa-0 ma-0\" no-gutters>\n                  <v-col cols=\"1\" class=\"text-center\">\n                    {{i+1}}\n                  </v-col>\n                  <v-col cols=\"4\" class=\"text-center\">\n                    {{flow_session.start_date_time}}\n                  </v-col>\n                  <v-col cols=\"4\" v-if=\"flow_session.finish_date_time\" class=\"text-center\">\n                    {{flow_session.finish_date_time}}\n                  </v-col>\n                  <v-col cols=\"4\" v-if=\"!flow_session.finish_date_time\" class=\"text-center\">\n                    -\n                  </v-col>\n                  <v-col cols=\"2\" class=\"text-center\">\n                    {{flow_session.is_finished}}\n                  </v-col>\n                  <v-col cols=\"1\" class=\"text-center pa-1\" >\n                    <v-btn @click=\"restart_flow_session(flow_session.id)\" small>\n                      start\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </div>\n          </v-container>\n        </v-responsive>\n        <v-container class=\"mt-6\">\n          <v-row>\n            <div v-html=\"markdownToHtml(welcome_page_content)\"></div>\n          </v-row>\n          <v-row class=\"mt-8\">\n            <v-btn depressed color=\"primary\" @click=\"start_new_flow_session()\">\n              Start New Flow Session\n            </v-btn>\n          </v-row>\n        </v-container>\n      </v-container>\n    </v-responsive>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { marked } from 'marked';\n\nexport default {\n  name: \"Flow\",\n  props: {\n    course_id: Number,\n    flow_id: Number\n  },\n  created: function() {\n    let self = this\n    axios.get(\"http://localhost:8000/home_profile\", {withCredentials: true})\n        .then(function(response){\n          console.log(response.data)\n          self.username = response.data.username\n          self.is_creater = response.data.create\n          axios.get(`http://localhost:8000/get_flow/${self.flow_id}`, {withCredentials: true})\n          .then(function(response){\n            console.log(response.data)\n            self.flow = response.data\n          }).catch(\n            function(error){\n              console.log(error.response)\n            }\n          )\n          axios.get(`http://localhost:8000/get_flow_welcome_page/${self.flow_id}`, {withCredentials: true})\n          .then(function(response){\n            console.log(response.data)\n            self.welcome_page_content = response.data.content\n          }).catch(\n            function(error){\n              console.log(error.response)\n            }\n          )\n          axios.get(`http://localhost:8000/get_flow_sessions/${self.flow_id}`, {withCredentials: true})\n          .then(function(response){\n            console.log(response.data)\n            self.flow_sessions = response.data\n          }).catch(\n            function(error){\n              console.log(error.response)\n            }\n          )\n        }).catch(\n          function(error)  {\n            if(error.response.status == 401){\n              self.$router.push({name:'Signup'})\n            }else{\n              console.log(error.response)\n            }\n          }\n        )\n  },\n  data: () => ({\n    flow: {},\n    welcome_page_content: \"\",\n    username : \"\",\n    is_creater : false,\n    markdown:  \"# Hello World\",\n    flow_sessions: []\n  }),\n  methods:{\n      markdownToHtml(md){\n        return marked(md);\n      },\n      start_new_flow_session(){\n        const params = {\"flow_id\":this.flow_id}\n        const config = {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          withCredentials: true\n        };\n        let self = this;\n        axios.post(`http://localhost:8000/start_new_flow_session`, params, config)\n          .then(function(response){\n            console.log(response.data)\n            if(response.data.start_success){\n              self.$router.push({name:'FlowSession', params: {flow_session_id: response.data.flow_session_id, page_num: 1}})\n            }\n          }).catch(\n            function(error){\n              console.log(error)\n            }\n          )\n      },\n      restart_flow_session(flow_session_id){\n        this.$router.push({name:'FlowSession', params: {flow_session_id: flow_session_id, page_num: 1}})\n      }\n  },\n};\n</script>\n"]}]}