{"remainingRequest":"/app/my-application/node_modules/babel-loader/lib/index.js!/app/my-application/node_modules/cache-loader/dist/cjs.js??ref--1-0!/app/my-application/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/my-application/src/components/pages/teachers/CourseTaking.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/my-application/src/components/pages/teachers/CourseTaking.vue","mtime":1652423115223},{"path":"/app/my-application/babel.config.js","mtime":1652423115214},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1652423462045},{"path":"/app/my-application/node_modules/babel-loader/lib/index.js","mtime":1652423464641},{"path":"/app/my-application/node_modules/cache-loader/dist/cjs.js","mtime":1652423462045},{"path":"/app/my-application/node_modules/vue-loader/lib/index.js","mtime":1652423456009}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIHByb3BzOiB7CiAgICBjb3Vyc2VfaWQ6IE51bWJlcgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0X2hvbWVfcHJvZmlsZSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogIuODpuODvOOCtuWQjSIsCiAgICAgICAgdmFsdWU6ICJ1c2VybmFtZSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJFbWFpbCIsCiAgICAgICAgdmFsdWU6ICJlbWFpbCIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICLjgqLjgq/jg4bjgqPjg5YiLAogICAgICAgIHZhbHVlOiAiaXNfYWN0aXZlIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIueoruWIpSIsCiAgICAgICAgdmFsdWU6ICJraW5kX25hbWUiCiAgICAgIH1dLAogICAgICB1c2VyX2luZm86IHt9LAogICAgICBpc19jcmVhdGU6IGZhbHNlLAogICAgICBjb3Vyc2U6IHt9LAogICAgICB0YWtpbmdfc3R1ZGVudHM6IFtdLAogICAgICBhZGRfZW1haWw6ICIiLAogICAgICBhZGRfdXNlcl9lcnJvcjogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBtb3ZlX3RvX2NvdXJzZV9pbmZvOiBmdW5jdGlvbiBtb3ZlX3RvX2NvdXJzZV9pbmZvKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0NvdXJzZUluZm8nLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgImNvdXJzZV9pZCI6IHRoaXMuY291cnNlX2lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtb3ZlX3RvX2NvdXJzZV90YWtpbmc6IGZ1bmN0aW9uIG1vdmVfdG9fY291cnNlX3Rha2luZygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdDb3Vyc2VUYWtpbmcnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgImNvdXJzZV9pZCI6IHRoaXMuY291cnNlX2lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtb3ZlX3RvX2NvdXJzZV9lZGl0OiBmdW5jdGlvbiBtb3ZlX3RvX2NvdXJzZV9lZGl0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ0NvdXJzZUVkaXQnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgImNvdXJzZV9pZCI6IHRoaXMuY291cnNlX2lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRfaG9tZV9wcm9maWxlOiBmdW5jdGlvbiBnZXRfaG9tZV9wcm9maWxlKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2hvbWVfcHJvZmlsZSIsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICBzZWxmLnVzZXJfaW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgc2VsZi5pc19jcmVhdGVyID0gcmVzcG9uc2UuZGF0YS5jcmVhdGU7CgogICAgICAgIGlmIChzZWxmLmlzX2NyZWF0ZXIpIHsKICAgICAgICAgIHNlbGYuZ2V0X2NvdXJzZV9pbmZvKCk7CiAgICAgICAgICBzZWxmLmdldF90YWtpbmdfc3R1ZGVudHMoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDEpIHsKICAgICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ1NpZ251cCcKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRfY291cnNlX2luZm86IGZ1bmN0aW9uIGdldF9jb3Vyc2VfaW5mbygpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9nZXRfY291cnNlX2luZm8vIi5jb25jYXQoc2VsZi5jb3Vyc2VfaWQpLCB7CiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgc2VsZi5jb3Vyc2UgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7CiAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdTaWdudXAnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0X3Rha2luZ19zdHVkZW50czogZnVuY3Rpb24gZ2V0X3Rha2luZ19zdHVkZW50cygpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9nZXRfdGFraW5nX3N0dWRlbnRzLyIuY29uY2F0KHNlbGYuY291cnNlX2lkKSwgewogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHNlbGYudGFraW5nX3N0dWRlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09IDQwMSkgewogICAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnU2lnbnVwJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZF90YWtpbmdfc3R1ZGVudHM6IGZ1bmN0aW9uIGFkZF90YWtpbmdfc3R1ZGVudHMoKSB7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgImNvdXJzZV9pZCI6IHRoaXMuY291cnNlX2lkLAogICAgICAgICJlbWFpbCI6IHRoaXMuYWRkX2VtYWlsCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpOwogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICB9OwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9yZWdpc3Rlcl90YWtpbmdfc3R1ZGVudCcsIHBhcmFtcywgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHNlbGYuZ2V0X3Rha2luZ19zdHVkZW50cygpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AAEA;AACAA,cADA;AAEAC;AACAC;AADA,GAFA;AAKAC;AACA;AACA,GAPA;AAQAC;AAAA;AAEAC,gBACA;AAAAC;AAAAC;AAAA,OADA,EAEA;AAAAD;AAAAC;AAAA,OAFA,EAGA;AAAAD;AAAAC;AAAA,OAHA,EAIA;AAAAD;AAAAC;AAAA,OAJA,CAFA;AAQAC,mBARA;AASAC,sBATA;AAUAC,gBAVA;AAWAC,yBAXA;AAYAC,mBAZA;AAaAC;AAbA;AAAA,GARA;AAuBAC;AACAC,uBADA,iCACA;AACA;AAAAf;AAAAgB;AAAA;AAAA;AAAA;AACA,KAHA;AAIAC,yBAJA,mCAIA;AACA;AAAAjB;AAAAgB;AAAA;AAAA;AAAA;AACA,KANA;AAOAE,uBAPA,iCAOA;AACA;AAAAlB;AAAAgB;AAAA;AAAA;AAAA;AACA,KATA;AAUAG,oBAVA,8BAUA;AACA;AACAC;AAAAC;AAAA,SACAC,IADA,CACA;AACAC;AACAC;AACAA;;AACA;AACAA;AACAA;AACA;AACA,OATA,EASAC,KATA,CAUA;AACAF;;AACA;AACAC;AAAAxB;AAAA;AACA,SAFA,MAEA;AACAuB;AACA;AACA,OAjBA;AAmBA,KA/BA;AAgCAG,mBAhCA,6BAgCA;AACA;AACAN;AAAAC;AAAA,SACAC,IADA,CACA;AACAC;AACAC;AACA,OAJA,EAIAC,KAJA,CAIA;AACAF;AACA,OANA,EAMAE,KANA,CAMA;AACA;AACAD;AAAAxB;AAAA;AACA,SAFA,MAEA;AACAuB;AACA;AACA,OAZA;AAcA,KAhDA;AAiDAI,uBAjDA,iCAiDA;AACA;AACAP;AAAAC;AAAA,SACAC,IADA,CACA;AACAC;AACAC;AACA,OAJA,EAIAC,KAJA,CAIA;AACAF;AACA,OANA,EAMAE,KANA,CAMA;AACA;AACAD;AAAAxB;AAAA;AACA,SAFA,MAEA;AACAuB;AACA;AACA,OAZA;AAcA,KAjEA;AAkEAK,uBAlEA,iCAkEA;AACA;AAAA;AAAA;AAAA;AACAL;AACA;AACAlB;AACA;AADA,SADA;AAIAgB;AAJA;AAMA;AACAD,kFACAE,IADA,CACA;AACAC;AACAC;AACA,OAJA;AAKA;AAjFA;AAvBA","names":["name","props","course_id","created","data","headers","text","value","user_info","is_create","course","taking_students","add_email","add_user_error","methods","move_to_course_info","params","move_to_course_taking","move_to_course_edit","get_home_profile","axios","withCredentials","then","console","self","catch","get_course_info","get_taking_students","add_taking_students"],"sources":["CourseTaking.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-responsive :max-width=\"1200\" class=\"mx-auto\">\n      <v-container>\n        <v-row>\n          <v-col cols=\"6\">\n            <v-subheader :class=\"['text-h5']\">{{course.course_name}}</v-subheader>\n          </v-col>\n          <v-col cols=\"6\">\n            <v-container>  \n              <v-row justify=\"end\">\n                <div>\n                  {{this.user_info.username}} ( {{this.user_info.email}})<br>\n                  {{this.user_info.kind_name}} としてログイン中\n                  </div>\n              </v-row>\n            </v-container>\n          </v-col>\n        </v-row>\n        <v-row>\n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_info()\" depressed block color=\"transparent\"  class=\"mb-2\"> \n            コース情報\n          </v-btn>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_taking()\" depressed block color=\"transparent\"  class=\"mb-2\">\n            履修者\n          </v-btn>\n          <v-divider class=\"red\"></v-divider>\n        </v-col >  \n        <v-col cols=\"2\">\n          <v-btn depressed block color=\"transparent\"  class=\"mb-2\">\n            プレビュー\n          </v-btn>\n        </v-col >  \n        <v-col cols=\"2\">\n          <v-btn @click=\"move_to_course_edit()\" depressed block color=\"transparent\"  class=\"mb-2\">\n            編集\n          </v-btn>\n        </v-col>  \n        </v-row>\n        <v-divider class=\"mt-0\"></v-divider>\n        <v-row class=\"mt-5\" >\n          <v-responsive :max-width=\"1000\" class=\"mx-auto\">\n            <v-container>\n              <v-row>\n                <v-col>\n                  <v-subheader :class=\"['text-h5']\">履修中のユーザ</v-subheader>\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col>\n                  <v-data-table\n                    :headers=\"headers\"\n                    :items=\"taking_students\"\n                    :items-per-page=\"5\"\n                    :search=\"search\"\n                    \n                  ></v-data-table>\n                </v-col>\n              </v-row>\n              <v-row>\n                <v-col>\n                  <v-subheader :class=\"['text-h5']\">履修者の追加</v-subheader>\n                </v-col>\n              </v-row>\n              <v-row >\n                <v-col cols=\"5\">\n                  <v-text-field v-model=\"add_email\" label=\"Emailアドレスを入力\" outlined dense></v-text-field>\n                </v-col>\n                <v-col cols=\"1\">\n                  <v-btn @click=\"add_taking_students()\" color=\"primary\">追加</v-btn>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-responsive>\n        </v-row>\n        \n      </v-container>\n    </v-responsive>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Home\",\n  props: {\n    course_id: Number\n  },\n  created: function() {\n    this.get_home_profile()\n  },\n  data: () => ({\n    \n    headers: [\n      {text: \"ユーザ名\", value:\"username\"},\n      {text: \"Email\", value:\"email\"},\n      {text: \"アクティブ\", value:\"is_active\"},\n      {text: \"種別\", value:\"kind_name\"}\n    ],\n    user_info : {},\n    is_create : false,\n    course: {},\n    taking_students: [],\n    add_email: \"\",\n    add_user_error: \"\"\n  }),\n  methods:{\n    move_to_course_info(){\n      this.$router.push({name:'CourseInfo', params:{\"course_id\":this.course_id}})\n    },\n    move_to_course_taking(){\n      this.$router.push({name:'CourseTaking',params:{\"course_id\":this.course_id}})\n    },\n    move_to_course_edit(){\n      this.$router.push({name:'CourseEdit',params:{\"course_id\":this.course_id}})\n    },\n    get_home_profile(){\n      let self = this\n      axios.get(\"http://localhost:8000/home_profile\", {withCredentials: true})\n      .then(function(response){\n        console.log(response.data)\n        self.user_info = response.data\n        self.is_creater = response.data.create\n        if(self.is_creater){\n          self.get_course_info()\n          self.get_taking_students()\n        }\n      }).catch(\n        function(error)  {\n          console.log(error)\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      )\n    },\n    get_course_info(){\n      let self = this\n      axios.get(`http://localhost:8000/get_course_info/${self.course_id}`, {withCredentials: true})\n        .then(function(response){\n          console.log(response.data)\n          self.course = response.data\n        }).catch(function(error){\n          console.log(error.response)\n        }).catch(function(error)  {\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      ) \n    },\n    get_taking_students(){\n      let self = this\n      axios.get(`http://localhost:8000/get_taking_students/${self.course_id}`, {withCredentials: true})\n        .then(function(response){\n          console.log(response.data)\n          self.taking_students = response.data\n        }).catch(function(error){\n          console.log(error.response)\n        }).catch(function(error)  {\n          if(error.response.status == 401){\n            self.$router.push({name:'Signup'})\n          }else{\n            console.log(error.response)\n          }\n        }\n      ) \n    },\n    add_taking_students(){\n      const params = {\"course_id\":this.course_id, \"email\": this.add_email}\n      console.log(JSON.stringify(params));\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true\n      };\n      let self = this\n      axios.post('http://localhost:8000/register_taking_student', params, config)\n      .then(function(response){\n        console.log(response.data)\n        self.get_taking_students()\n      })\n    }\n  },\n};\n</script>\n"],"sourceRoot":"src/components/pages/teachers"}]}